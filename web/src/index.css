/* Tailwind layers */
@tailwind base;
@tailwind components;
@tailwind utilities;

/* Base typography: larger, readable */
:root {
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

/* Page background and default text color */
body {
  @apply bg-sand text-slate-800;
  /* Subtle gradient + dot grid to add depth without hurting readability */
  --bg-spot-1: rgba(16, 185, 129, 0.12); /* emerald-ish brand tint */
  --bg-spot-2: rgba(59, 130, 246, 0.08); /* blue tint complement */
  --bg-dot: rgba(2, 6, 23, 0.04); /* slate-950 at low alpha */
  background-image:
    url('/bg-pattern.svg'),
    radial-gradient(800px 400px at 90% -100px, var(--bg-spot-2), rgba(255,255,255,0) 70%),
    radial-gradient(600px 300px at 50% -80px, var(--bg-spot-1), rgba(255,255,255,0) 70%),
    radial-gradient(circle at 1px 1px, var(--bg-dot) 1px, transparent 1px);
  background-size:
    1600px 1600px,
    auto,
    auto,
    24px 24px;
  background-position:
    top center,
    top right,
    top center,
    0 0;
}

/* Reusable card style */
.card {
  @apply bg-white rounded-2xl shadow-sm border border-slate-200;
}

/* Primary button utility */
.btn {
  @apply inline-flex items-center justify-center rounded-xl bg-brand-500 text-white px-4 py-2 font-medium hover:bg-brand-600 transition-colors;
}

/* Text input utility */
.input {
  @apply w-full rounded-xl border border-slate-300 px-3 py-2 focus:outline-none focus:ring-2 focus:ring-brand-300;
}

/* Dark mode and high contrast support via data attributes on <html> */
html[data-theme="dark"] body {
  @apply bg-slate-900 text-slate-100;
  --bg-spot-1: rgba(16, 185, 129, 0.12);
  --bg-spot-2: rgba(59, 130, 246, 0.12);
  --bg-dot: rgba(255, 255, 255, 0.05);
  background-image:
    url('/bg-pattern.svg'),
    radial-gradient(800px 400px at 90% -100px, var(--bg-spot-2), rgba(0,0,0,0) 70%),
    radial-gradient(600px 300px at 50% -80px, var(--bg-spot-1), rgba(0,0,0,0) 70%),
    radial-gradient(circle at 1px 1px, var(--bg-dot) 1px, transparent 1px);
  background-size:
    1600px 1600px,
    auto,
    auto,
    24px 24px;
  background-position:
    top center,
    top right,
    top center,
    0 0;
}
html[data-theme="dark"] .card {
  @apply bg-slate-800 border-slate-700;
}
html[data-theme="dark"] .btn {
  @apply bg-brand-400 hover:bg-brand-500 text-slate-900;
}
html[data-theme="dark"] .input {
  @apply bg-slate-800 border-slate-600 text-slate-100;
}

html[data-contrast="high"] body {
  @apply bg-white text-black;
  /* Keep high-contrast mode plain for maximum legibility */
  background-image: none !important;
}
html[data-contrast="high"] .card {
  @apply bg-white border-black;
}
html[data-contrast="high"] .btn {
  @apply bg-black text-white hover:bg-black;
}
html[data-contrast="high"] .input {
  @apply border-black;
}

/* Dyslexic-friendly font toggle */
/* Note: To use the actual OpenDyslexic typeface without system install,
   place the webfont files in /public/fonts and add sources here, e.g.:
   src: local('OpenDyslexic'), url('/fonts/OpenDyslexic-Regular.woff2') format('woff2'); */
@font-face {
  font-family: 'OpenDyslexic';
  src: local('OpenDyslexic');
  font-display: swap;
}
html[data-font="dyslexic"] body {
  /* Provide readable fallbacks if OpenDyslexic isnâ€™t installed */
  font-family: 'OpenDyslexic', 'Comic Sans MS', 'Atkinson Hyperlegible', ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
  /* Spacing tweaks that aid many readers with dyslexia */
  letter-spacing: 0.02em;
  word-spacing: 0.04em;
  line-height: 1.6;
}
/* Ensure key controls inherit the dyslexic font and spacing */
html[data-font="dyslexic"] h1,
html[data-font="dyslexic"] h2,
html[data-font="dyslexic"] h3,
html[data-font="dyslexic"] h4,
html[data-font="dyslexic"] h5,
html[data-font="dyslexic"] h6,
html[data-font="dyslexic"] .btn,
html[data-font="dyslexic"] .input,
html[data-font="dyslexic"] select,
html[data-font="dyslexic"] textarea,
html[data-font="dyslexic"] button {
  font-family: inherit;
}

/* Better focus visibility */
*:focus-visible {
  outline: 3px solid #4ea6ff;
  outline-offset: 2px;
}
